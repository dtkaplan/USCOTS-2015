---
output:
  knitrBootstrap::bootstrap_document:
    title: "Test file"
    theme: readable
    highlight: highlightjs
    theme.chooser: TRUE
    highlight.chooser: TRUE
    menu: TRUE
---

<div style="background-image: url(data-computing.jpg);">
<h3 style="color: white;">Basics of Data Science in R & RStudio</h3>
<h4 style="color: white;">&nbsp;&nbsp;USCOTS 2015</h4>
<h4 style="color: white;">&nbsp;&nbsp;Workshop leaders: Daniel Kaplan & Nick Horton</h4></div>

```{r include=FALSE}
knitr::opts_chunk$set(tidy=FALSE)
```

## Workshop Times

* Wednesday May 27: 8:30am - 4:00pm
    Morning and afternoon sessions with a break for lunch (participants are on their own for lunch).
* Thursday May 28: 8:30am - 12:00pm
    Morning session only

## Prior to the Wednesday start. 

Come a bit before the official 8:30 am start to get help with these.

* Making sure you have access to the software.
    * [**R 3.1.1** or more recent](http://cran.rstudio.com/) as well as [**RStudio** preview edition](http://www.rstudio.com/products/rstudio/download/preview/)    
    or, alternatively,
    * use a web browser to access the RStudio **server** being provided for this workshop at <http://macalester.edu/rstudio>.  You will need login credentials which will be provided at the start of the workshop. (N.B., this server will be available only for the duration of USCOTS 2015.  We will show you how to preserve your files for later use on another system.)
    
    
    Whichever way you access R and RStudio, please
    
    * update and install additional packages, by executing these lines in the R console in RStudio:
        ```{r eval=FALSE}
update.packages()
install.packages(c("devtools", "mosaic", "tidyr", "dplyr", "ggvis", "rmarkdown", "shiny", "haven", "mosaicData", "manipulate", "babynames", "nycflights13"))
devtools::install_github("ProjectMOSAIC/mosaic", ref="beta")
devtools::install_github("dtkaplan/DCF")
devtools::install_github("dtkaplan/DCFinteractive")
```

* Open up **communal notes** for workshop. [Link to Google Doc](https://docs.google.com/document/d/1XEYhUZj9C468VRAl_SoGuUHL5UVtz0JU6PF5iCPuE6c/edit?usp=sharing) Add comments and questions as the workshop progresses.
* Participant **skill survey** (for forming teams). [Link to survey](https://docs.google.com/forms/d/1zQBF_3PIs7OHLn9srhr5odgqL0p9yxsi8OjnmqRk43k/viewform). After you press "submit", you'll see a page with a link to "Edit your response." Open that in your browser and **leave it open** so that you can fill in your team name when you have formed it.

<!-- <iframe src="https://docs.google.com/spreadsheets/d/1PUzAAIvn6Y6r7Y5ozPSRdwuFiHYcuYGdAH-iCOl7EBI/pubhtml?widget=true&amp;headers=false" height="300px" width="100%"></iframe> -->

## Workshop outline

### Welcome! 

1. Brief review of setup and plans [DTK and NJH, 10 min]
2. Introduce your neighbors, and form teams for workshop activities. [Follow the instructions, here.](form_teams.html) Two to three people per team, with a nice mix of skills. Give your team a name so that we can refer to it. [15 min]

### RStudio

* Quick introduction to RStudio [NJH, 5 min]

[OUTLINE TO BE MADE BY NICK, THEN DELETE THIS BULLET POINTS]

* panes, tabs, console, editor?, 
* Lead through opening a project.  open a project
* loading packages, install if necessary
* bringing in data from a package
* Data frames.  We'll work with ones from `mosaicData`, `DCF`, and `nycflights13` to begin with. Variables and cases. Quick summaries: `glimpse()`, `nrow()`, `names()`


### Visualization Quick Start

1. Some grammar [DTK, 15 min]
    * Frame
    * Glyph
    * Aesthetic (graphical property)
    * Glyph-ready data
#. Map variables to aesthetics with `mScatter()`,  `mDistribution()`, `mBar()` (`mWorldMap()`)  [note: lattice graphics with `mPlot()`]
    ```{r eval=FALSE}
require(DCF)
require(DCFinteractive)
DCFinteractive::mScatter( your_data_frame )   
```
#. Activity: Visualizing a data frame [DTK, 10 min]
    * Construct a visualization of variables in a data frame. [Note to DTK: need more scaffolding here (list of interesting datasets, how to see the codebooks, etc.)]
    
### R Markdown Quick Start
1. Quick intro to R Markdown and reproducible analysis [Prezi](https://prezi.com/e7wtfnacj9ub/intro-to-r-markdown/) [NJH, 10 min]
2. Activity (visualization redux): Give these commands to open our template file in the editor.
    ```{r eval=FALSE}
download.file("http://tiny.cc/dcf/USCOTS-01.Rmd",
              dest="USCOTS-01.Rmd")
file.edit("USCOTS-01.Rmd")
```
3. Compile it to HTML.
4. Publish it. RPubs ID: USCOTS-2015  Password: Written on board. <!-- benchtree -->
    * Cut and paste the corresponding `ggplot2` command from `Show Expression` output in `mplot()` as a chunk into your Rmd file. 
    * Publish to RPubs (user ID: USCOTS-2015)
#. [Data visualization cheat sheet](http://www.rstudio.com/wp-content/uploads/2015/04/ggplot2-cheatsheet.pdf) as handout, or follow the link.

### Wrangling Quick Start

1. Minimal R [DTK, 5 min] THE SLIDES WILL GO HERE.
    * data frames
    * functions and arguments
    * piping
#. Wrangling data verbs vs reduction verbs vs transformation verbs. [DTK, 10 min] THESE WILL BE A FEW SLIDES.  REFER TO THE CHEAT SHEET.
#. Activity: What happened to Mary and Jane? [DTK, 15 min] THIS WILL BE USCOTS-02.Rmd
    * `filter()`, piping, `select()`, `arrange()`
    * filter by name, by sex, by year range.
    * `group_by()` and `summarise()`
        * Add up selected names over the years.
        * How many babies in each year?
        * How many distinct names in each year?
        * Entropy?
#. Convert USCOTS-02.Rmd to be some names of interest to you. Publish to RPubs. [20 min]
#. [Data Wrangling Cheat Sheet](http://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf)

### Case study: Bike sharing

Drill on Bike Sharing: Give out Rmarkdown scaffold [DTK] [20 min]

* Which station has the most rentals?
* Which station has the most rentals on Saturday?
* Which pair of stations has the biggest traffic?
* Are weekdays different from weekends?  For each station?

### Case study: Airline flights database

activity: work in groups to do something with dplyr?  (provide scaffolding with stubbed out Rmd file perhaps using nycflights13 [NJH]  (join) plus more practice  (20 minutes)

Link to Nick's notes WILL GO HERE
    ```{r eval=FALSE}
download.file(
  "http://dtkaplan.github.io/USCOTS-2015/Handouts/USCOTS-nycflights13.Rmd",
  dest="USCOTS-nycflights13.Rmd")
file.edit("USCOTS-nycflights13.Rmd")
```

### Data Scraping Quick Start

* simple data scraping: reading HTML tables (nuclear reactors) [DTK] Activity??   (20 minutes)
* Other sources of data. Something easy they can do: NYC open data, CDC.  At the level of downloading CSV files. [DTK to find example from Data Computing book.]  Bike sharing? Restaurants?  Scaffold 70% for them and have them do one. Difference between source API and what you write in R. [30 min work, 10 min presentation]

### Shiny and dynamic graphics

* brief introduction to Shiny via Markdown [NJH] (10 minutes)
* Activity: customize a default shiny file.  [DTK, 30 min]
    ```{r eval=FALSE}
download.file("http://tiny.cc/dcf/USCOTS-Shiny.Rmd",
              dest="USCOTS-Shiny.Rmd")
file.edit("USCOTS-Shiny.Rmd")
```

### Maps: For self study

* Make a choropleth map. `mWorldMap()`, `mUSMap()`  [DTK] From Data Computing example
* Leaflet bicycle map

### Models and Machine Learning: for self study

Link to Danny's notes WILL GO HERE  [DTK]

* glyph-ready is also model-ready [DTK]
* lm() glm()
* “machine learning”
* unsupervised: car data clustering
* supervised: CART

### Text mining 101: for self study [NJH]

Link to Nick's notes WILL GO HERE
    ```{r eval=FALSE}
download.file(
  "http://dtkaplan.github.io/USCOTS-2015/Handouts/USCOTS-text.Rmd",
  dest="USCOTS-text.Rmd")
file.edit("USCOTS-text.Rmd")
```
